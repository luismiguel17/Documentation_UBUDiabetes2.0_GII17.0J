\apendice{Plan de Proyecto Software}

\section{Introducción}
En este apartado se pretende estimar el trabajo, el tiempo y los costes necesarios para la realización del proyecto.
Cabe mencionar que se trabajaron con 3 repositorios:
\begin{itemize}
	\item UbuDiabetes2.0\_GII\_14b: Repositorio inicial de partida. En él se realizaron las primeras configuraciones y ediciones para el nuevo proyecto.
	\item UBUDiabetes2.0\_GII17.0J: Repositorio nuevo creado para continuar con el proyecto. Se puede consultar más detalles del motivo de la creación de un nuevo repositorio para el proyecto en la sección \textbf{Aspectos relevantes del desarrollo del proyecto}.
	\item Documentation\_UBUDiabetes2.0\_GII17.0J: Repositorio creado únicamente para la realización de la documentación.
\end{itemize}



\section{Planificación temporal}
A continuación, se detallarán los diferentes objetivos que se han establecido para cada \textit{sprint} y, a su vez, el progreso obtenido en los mismos. Para ello se ha utilizado una metodología ágil denominada \textit{SCRUM}~\cite{schwaber2002agile}. Se empleará a su vez el gestor de tareas provisto por GitHub y se generarán gráficos \textit{burndown} para el seguimiento de los \textit{sprint}, los cuales son provistos por la extensión \textit{ZenHub}.
\subsection{Sprint 0 - Febrero 19-2018 - Marzo 01-2018}
En este sprint se pretenden instalar las herramientas necesarias para la realización del proyecto, así como la lectura y comprensión de las memorias y anexos de los proyectos previos relacionados con el mismo. A su vez se pretende ejecutar la aplicación en un emulador para comprobar su correcto funcionamiento.
En este sprint se crearon algunas tareas que, como se puede observar quedaron sin finalizar ya que, como se mencionó en la sección \textbf{Aspectos relevantes del desarrollo del proyecto}, se creó un nuevo proyecto en el que se continúa con la realización del proyecto.
Podemos observar el progreso del \textit{sprint} en la figura~\ref{fig:sprint-0}
\imagen{sprint-0}{Progreso en el \textit{sprint} 0.}{0.9}
\subsection{Sprint 1 - Marzo 8-2018 - Marzo 14-2018}
En este \textit{sprint} se pretende leer la documentación relacionada con el \textit{testing} con \textit{Espresso} y empezar con las configuraciones necesarias para la creación de los primeros test instrumentados.
Podemos observar el progreso del \textit{sprint} en la figura~\ref{fig:sprint-1}
\imagen{sprint-1}{Progreso en el \textit{sprint} 1.}{0.9}
\subsection{Sprint 2 - Marzo 14-2018 - Marzo 21-2018}
En este \textit{sprint} se pretende entender el funcionamiento de la herramienta \textit{Texmaker} para poder empezar a realizar las primeras modificaciones para la documentación del proyecto.
Así mismo, se pretende crear un nuevo proyecto en Android Studio, con su repositorio en \textit{GitHub}, con las configuraciones necesarias para poder continuar con el mismo.
Podemos observar el progreso del \textit{sprint} en la figura~\ref{fig:sprint-2}
\imagen{sprint-2}{Progreso en el \textit{sprint} 2.}{0.9}
\subsection{Sprint 3 - Marzo 15-2018 - Marzo 22-2018}
Este \textit{sprint} se realizó en la misma semana del \textit{sprint} anterior, pero en el nuevo repositorio creado. En él se pretende migrar todos los datos de UBUDiabetes 1.0 al nuevo proyecto creado, realizando las configuraciones y modificaciones necesarias para la correcta compilación y ejecución del proyecto ya que este nuevo proyecto se realizó en una nueva versión de Android Studio, lo que requería configuraciones diferentes a las del proyecto anterior, por ejemplo, nuevas librerías, diferentes dependencias de Android, contenedores diferentes en los diseños, etc. Así mismo se pretende seguir con la lectura de la documentación relacionada al \textit{testing}.
Podemos observar el progreso del \textit{sprint} en la figura~\ref{fig:sprint-3}
\imagen{sprint-3}{Progreso en el \textit{sprint} 3.}{0.9}
\subsection{Sprint 4 - Marzo 22-2018 - Marzo 28-2018}
En este \textit{sprint} se pretende realizar y ejecutar los primeros test instrumentados con \textit{Espresso}.
Podemos observar el progreso del \textit{sprint} en la figura~\ref{fig:sprint-4}
\imagen{sprint-4}{Progreso en el \textit{sprint} 4.}{0.9}
\subsection{Sprint 5 - Marzo 28-2018 - Abril 11-2018}
En este \textit{sprint} se pretende crear las primeras líneas para la documentación del proyecto, crear un nuevo diseño para la pantalla ``Perfil-Registro'' y crear un buscador de alimentos para la pantalla ``Carbohidratos''.
Podemos observar el progreso del \textit{sprint} en la figura~\ref{fig:sprint-5}
\imagen{sprint-5}{Progreso en el \textit{sprint} 5.}{0.9}
\subsection{Sprint 6 - Abril 12-2018 - Abril 19-2018}
En este \textit{sprint} se realizaron varias tareas, la mayoría relacionadas con modificaciones en la interfaz gráfica del usuario:
\begin{itemize}
	\item Empezar con la configuración y ejecución para \textit{sonarQube}.
	\item Introducir en la tabla ``alimentos'' el índice glucémico de cada alimento.
	\item Mostrar en la lista de alimentos ingeridos por el usuario, la categoría según el índice glucémico de cada alimento.
	\item Buscar e implementar una manera de guardar en un registro los alimentos ingeridos por el usuario con su Bolo corrector final.
	\item Añadir opción de configuración (en el Perfil) de número de decimales a devolver en el cálculo del bolo corrector.
	\item Implementar la selección y eliminación de los \textit{items} de la lista de ingesta.
	\item Cambiar la forma de almacenamiento de las raciones en gramos para cada alimento.
	\item Implementar la selección de una imagen de galería para el Perfil del usuario.
\end{itemize}
Podemos observar el progreso del \textit{sprint} en la figura~\ref{fig:sprint-6}
\imagen{sprint-6}{Progreso en el \textit{sprint} 6.}{0.9}
\subsection{Sprint 7 - Abril 19-2018 - Abril 26-2018}
En este \textit{sprint} se pretende continuar con la memoria del proyecto y realizar nuevas modificaciones para la interfaz gráfica del usuario. Las tareas para este \textit{sprint} fueron:
\begin{itemize}
	\item Asignar permisos de uso de la cámara y permisos de escritura en la tarjeta SD para Android 6.0 y superior.
	\item Cambiar la carga de los datos de la tabla ``Alimentos'' de la pantalla ``Carbohidratos'' a la pantalla ``SplashScreen''.
	\item Implementar orden inverso para las listas.
	\item Mostrar el sumatorio de los Hidratos de Carbono y del Bolo corrector en la pantalla ``Carbohidratos''.
	\item Continuar con la documentación para la memoria del proyecto.
\end{itemize}
Podemos observar el progreso del \textit{sprint} en la figura~\ref{fig:sprint-7}
\imagen{sprint-7}{Progreso en el \textit{sprint} 7.}{0.9}
\subsection{Sprint 8 - Abril 26-2018 - Mayo 10-2018}
En este \textit{sprint} se pretende continuar con la realización y/o modificación de nuevos test tanto unitarios como con \textit{Espresso}. A su vez, se pretende seguir con la documentación, pero en un nuevo repositorio creado solo con esa finalidad.
Por otro lado, se continuó también con la modificación de la interfaz gráfica del usuario.
En este \textit{sprint} se creó la primera \textbf{Apk} del proyecto en una \textit{release}.
Podemos observar el progreso del \textit{sprint} en la figura~\ref{fig:sprint-8}
\imagen{sprint-8}{Progreso en el \textit{sprint} 8.}{0.9}
\subsection{Sprint 9 - Mayo 10-2018 - Mayo 18-2018}
En este \textit{sprint} se pretende corregir pequeños detalles que se observaron que fallaban tras instalar la primera \textbf{Apk} creada en el \textit{sprint} anterior en un dispositivo móvil real.
Tras corregir esos detalles y añadir nuevas modificaciones, se crearon dos nuevas versiones \textbf{Apk} para la aplicación. 
Por otro lado, se corrigieron pequeños fallos en la memoria del proyecto.
Podemos observar el progreso del \textit{sprint} en la figura~\ref{fig:sprint-9}
\imagen{sprint-9}{Progreso en el \textit{sprint} 9.}{0.9}
\subsection{Sprint 10 - Mayo 18-2018 - Mayo 25-2018}
En este \textit{sprint} se pretende seguir con la modificación de la interfaz gráfica del usuario. 
A su vez, se pretende crear una nueva estructura para los test unitarios. Se pretende separar en distintas clases los test que son precisos/exactos, de los que tienen cierto margen de error. 
Podemos observar el progreso del \textit{sprint} en la figura~\ref{fig:sprint-10}
\imagen{sprint-10}{Progreso en el \textit{sprint} 10.}{0.9}
\subsection{Sprint 11 - Junio 15-2018 - Junio 22-2018}
En este \textit{sprint} se pretende crear una nueva estructura jerárquica de los paquetes java de la aplicación. Así mismo se pretende crear un nuevo diseño de gráficas para consultar el historial de glucemias del usuario.
Podemos observar el progreso del \textit{sprint} en la figura~\ref{fig:sprint-11}
\imagen{sprint-11}{Progreso en el \textit{sprint} 11.}{0.9}
\subsection{Sprint 12 - Junio 22-2018 - Junio 26-2018}
En este \textit{sprint} se pretende corregir los últimos detalles de la aplicación y ejecutar la herramienta \textbf{SonarLint} de Android Studio en el proyecto final.
Podemos observar el progreso del \textit{sprint} en la figura~\ref{fig:sprint-12}
\imagen{sprint-12}{Progreso en el \textit{sprint} 12.}{0.9}


Los \textit{sprint} que se detallarán a continuación son referentes a la documentación del proyecto, es decir, son creados desde el repositorio creado para la documentación. Las fechas pueden coincidir con alguno de los \textit{sprints} anteriores o pueden estar dentro de las fechas anteriores, su explicación es que se realizaba la documentación y la aplicación en paralelo.
\subsection{Sprint 13 - Mayo 18-2018 - Junio 07-2018}
En este \textit{sprint} se pretende continuar con la documentación del proyecto.
Cabe mencionar que no he realizado una dedicación a tiempo completo a este \textit{sprint}, sino que ha sido una dedicación parcial. Esto es debido a que me encuentro cursando dos asignaturas al mismo tiempo, por lo tanto, este \textit{sprint} ha tenido una duración superior a los primeros ya que por estas fechas los alumnos tenemos cerca los exámenes finales.
Podemos observar el progreso del \textit{sprint} en la figura~\ref{fig:sprint-13}
\imagen{sprint-13}{Progreso en el \textit{sprint} 13.}{0.9}
\subsection{Sprint 14 - Junio 07-2018 - Junio 15-2018}
En este \textit{sprint} se pretende corregir los errores de la primera versión parcial corregida por Raúl Marticorena Sanchéz. Así mismo se pretende continuar con la documentación.
Podemos observar el progreso del \textit{sprint} en la figura~\ref{fig:sprint-14}
\imagen{sprint-14}{Progreso en el \textit{sprint} 14.}{0.9}
\subsection{Sprint 15 - Junio 15-2018 - Junio 22-2018}
Continuamos con la documentación del proyecto.
Podemos observar el progreso del \textit{sprint} en la figura~\ref{fig:sprint-15}
\imagen{sprint-15}{Progreso en el \textit{sprint} 15.}{0.9}

\subsection{Sprint 16 - Junio 22-2018 - Junio 26-2018}
En este \textit{sprint} se pretende finalizar con la documentación del proyecto así como corregir los últimos detalles de la misma.
Podemos observar el progreso del \textit{sprint} en la figura~\ref{fig:sprint-16}
\imagen{sprint-16}{Progreso en el \textit{sprint} 16.}{0.9}
\section{Estudio de viabilidad}
En esta sección vamos a realizar un estudio de viabilidad económica de nuestro proyecto y su viabilidad legal, dos aspectos importantes y relevantes.
\subsection{Viabilidad económica}
A continuación, analizaremos la viabilidad económica de nuestro proyecto detallando los costes que hubiera supuesto en un caso real, es decir,  en los diferentes niveles de una empresa.
\subsubsection{Coste de personal}
Los recursos humanos empleados en este proyecto han sido 2: el propio alumno quien realizó el proyecto y el tutor del mismo. Se puede estimar que el alumno ha empleado 309 horas a 20\euro{} la hora:
\[20~{\mbox{\euro}} /\textsf{Hora}* 309\textsf{Horas}=6180~{\mbox{\euro}} \]

Para calcular el coste de las reuniones con el tutor se conoce que en total se imparten 32 créditos  con un coste anual aproximado por crédito de 600\euro{}, por lo que tendríamos:
\[600~{\mbox{\euro}} * 0.5 \textsf{créditos}= 300 ~{\mbox{\euro}} \]

A esta cuantía debemos añadirle el valor que debería llevarse la Seguridad Social, lo cual ha sido obtenido a partir de\footnote{\url{http://www.seg-social.es/Internet_1/Trabajadores/CotizacionRecaudaci10777/Basesytiposdecotiza36537/index.htm}}:
\begin{itemize}
\item 1,55\%: Desempleo.
\item 0,03\%: Formación profesional.
\item 4,7\%: Contingencias comunes 
\item Lo que hace un total de: 6,28%
\end{itemize}
Por lo que sería:
\[(6180 + 300)~{\mbox{\euro}}*0.0628=407~{\mbox{\euro}}\]
\subsubsection{Coste de hardware}
Cabe mencionar que no se necesitó de ningún equipo informático adicional para la realización del proyecto. No obstante, se deberá calcular el coste del \textit{hardware} utilizado en el proyecto.
En este caso al tratarse de una aplicación móvil, únicamente se necesitó un ordenador portátil cuyo valor se estima en 600\euro{} y suponiendo una vida útil de 3-4 años y 15 semanas de proyecto, se tiene un coste de amortización de 43\euro{} aproximadamente.
\[ \frac{600\euro}{4 \ a\textit{ñ}os} * \frac{1 \ a\textit{ñ}o}{52 \ semanas} * 15 \ semanas \approx 43\euro \]

\subsubsection{Coste de software}
Este proyecto es una segunda versión y se ha desarrollado empleando plataformas \textit{software} libre para todo lo imprescindible, por lo que el coste \textit{software} es cero.
\subsubsection{Coste total}
Así, el coste total del proyecto ha sido\ref{tab:costes}:
\begin{table}[]
\centering
\caption{Costes totales}
\label{tab:costes}
\rowcolors {2}{gray!35}{}
%\resizebox{0.5\textwidth}{!}{
\begin{tabular}{p{4cm} p{2cm}}
\toprule
Costes & Importe \\ \midrule
Personal         & 6480 \euro{}   \\ 
Seguridad Social & 407 \euro{} \\ 
Material         & 43 \euro{}   \\ 
Totales          & 6930 \euro{} \\ \bottomrule
\end{tabular}
%}
\end{table}
\subsection{Beneficios}
Para poder obtener ingresos por nuestra aplicación se piensa en sacar una versión comercializable, es decir, convertirla en una aplicación de pago(sin incluir publicidad de terceros).

Al tratarse de una aplicación móvil para el sistema operativo Android, la fuente principal de descarga sería la tienda oficial \textbf{Google Play Store} para que de esta manera esté disponible para su compra.
Antes de publicar nuestra aplicación se debe tener en cuenta que debemos tener una cuenta de desarrollador en Google. Esto se puede conseguir a través de \textbf{Google Play Developer Console}.

Una vez se haya accedido a la consola de desarrollador de Google Play, se deberá proceder al pago de la tasa que Google pone a todos los desarrolladores para que puedan incluir sus apps en la tienda.
Una vez finalizado todos los pagos, ya se puede gestionar nuestra aplicación desde el \textbf{centro de gestión e información como desarrolladores}, que nos permitirá añadir nuestra aplicación entre otras opciones. Una vez completada toda la información necesaria para poder publicar nuestra aplicación, habiendo marcado que nuestra aplicación será de pago podremos vender nuestra aplicación a través de \textbf{Google Play Store}.

Antes de poner un precio a nuestra aplicación debemos tener en cuenta lo siguiente:
\begin{itemize}
	\item Google Play~\cite{googleplay}.
		\begin{itemize}
			\item Google añade una \textbf{Comisión de Transacción} al precio de venta de cada producto. Esta Comisión de 				Transacción, Google la fija en un 30\% del precio de la aplicación, recibiendo de esta manera un 70\% el 					desarrollador y el 30\% restante se destina al \textit{partner} de distribución.
			\item El precio por darse de alta como desarrollador en Google ronda los 20\euro{}.
			\item El propio desarrolador es quien pone el precio de la app a partir de 0.50\euro{}.
		\end{itemize}
	\item Diabetes en España~\cite{fundaciondiabetes}.
		\begin{itemize}
			\item Según datos recogidos por la \textbf{Fundación para la diabetes}, el 13.8\% de la población Española mayores de 18 años  tienen Diabetes. Dentro de este porcentaje, las personas con Diabetes tipo 1 supone entre el 5\% y el 1\% del total. 
			Podemos observar estos datos en la siguiente imagen:~\ref{fig:Datos_Globales_Diabetes}:
\imagen{Datos_Globales_Diabetes}{Datos Globales de Prevalencia (\%)}{0.7}	
		\end{itemize}
\end{itemize}
Por lo tanto, teniendo en cuenta los datos anteriores, y con una previsión de ventas para el \textbf{primer año}, se decide:
\begin{itemize}
	\item Lugar de distribución: España.
	\item Medio de distribución: Google Play Store.
	\item Precio de venta: \textbf{0.99\euro{}}.
	\item Numero de descargas: 1\% de 5301314 personas con diabetes.
\end{itemize}
Por lo tanto, el primer año obtendremos unos ingresos de
\begin{itemize}
	\item \textbf{Caso A}:
		\begin{itemize}
			\item \textbf{Retribución total}: \[(0.01 * 5301314) * 0.99~{\mbox{\euro}} = 52483.0086~{\mbox{\euro}} \]
			\item \textbf{Retribución desarrollador}: 70\% de 52483.0086\euro{} = 36738.10602\euro{}.
			\item \textbf{Retribución \textit{partner} de distribución}: 30\% de 52483.0086\euro{} = 15744.903\euro{}.
		\end{itemize}
	\item \textbf{Caso B}:
	Nuestro competidor directo y una de las aplicaciones mejores valoradas y que se asemeja a nuestra aplicación es: \textbf{Social Diabetes}. Esta aplicación cuenta con aproximadamente 100Mil descargas en \textbf{Google Play Store} y su primera versión Android apareció en 2012. Si estimamos su promedio de ventas en~\cite{socialdiabetes}
	\[ \frac{100000\textit{descargas}}{6 \ a\textit{ñ}os} \approx 16667 \]
	Observamos que SocialDiabetes tiene un promedio de 16667 descargas anules. Si estimamos el  mismo número de descargas para el primer año, nuestra aplicación obtendrá:
	\begin{itemize}
			\item \textbf{Retribución total}: \[16667 * 0.99~{\mbox{\euro}} = 16500.33~{\mbox{\euro}} \]
			\item \textbf{Retribución desarrollador}: 70\% de 16500.33\euro{} = 11550.231\euro{}.
			\item \textbf{Retribución \textit{partner} de distribución}: 30\% de 16500.33\euro{} = 4950.099\euro{}.
	\end{itemize}
\end{itemize}
Así, si el coste total de nuestro proyecto ha sido \textbf{6930\euro{}}, los \textbf{beneficios} obtenidos serían:
\begin{itemize}
	\item Beneficio según caso A:
	\begin{itemize}
		\item Coste Proyecto: \[6930~{\mbox{\euro}} + 20~{\mbox{\euro}}(GooglePlay) = 6950~{\mbox{\euro}} \]
		\item Retribución Proyecto: 36738.10602\euro{}.
		\item Beneficio: \[36738.10602~{\mbox{\euro}} - 6950~{\mbox{\euro}} = 29788.106~{\mbox{\euro}} \]
	\end{itemize}
	\item Beneficio según caso B:
	\begin{itemize}
		\item Coste Proyecto: \[6930~{\mbox{\euro}} + 20~{\mbox{\euro}}(GooglePlay) = 6950~{\mbox{\euro}} \]
		\item Retribución Proyecto: 11550.231\euro{}.
		\item Beneficio: \[11550.231~{\mbox{\euro}} - 6950~{\mbox{\euro}} = 4600.23~{\mbox{\euro}} \]
	\end{itemize}
\end{itemize}
\subsection{Viabilidad legal}
En este apartado pasamos a analizar la viabilidad legal del proyecto. Para ello vamos a describir las licencias de elementos o librerías que se hayan podido utilizar.

El primer caso sujeto a estudio es el de la librería \textbf{Hitomis/CircleMenu v1.0.2}. Esta librería se distribuye bajo la licencia Apache License v2.0.

El segundo caso sujeto a estudio es el de la librería \textbf{(MPAndroidChart v3.0.3)}. Esta Esta librería se distribuye bajo la licencia Apache License v2.0.
\subsubsection{Apache License V2.0}
La licencia \textit{Apache} (Apache License o Apache Software License para versiones anteriores a 2.0) es una licencia de software libre permisiva creada por la \textit{Apache Software Foundation (ASF)}. La licencia \textit{Apache} (con versiones 1.0, 1.1 y 2.0) requiere la conservación del aviso de derecho de autor y el descargo de responsabilidad, pero no es una licencia copyleft, ya que no requiere la redistribución del código fuente cuando se distribuyen versiones modificadas.
Al igual que otras licencias de software libre, todo el software producido por la A\textit{ASF} o cualquiera de sus proyectos está desarrollado bajo los términos de esta licencia, es decir, la licencia permite al usuario del software de la libertad de usar el software para cualquier propósito, para distribuirlo, modificarlo y distribuir versiones modificadas del software, bajo los términos de la licencia, sin preocuparse de las regalías~\cite{wiki:apachelicense}.

